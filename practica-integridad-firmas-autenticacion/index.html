
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://conocimiento-en-bits.neocities.org/practica-integridad-firmas-autenticacion/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.3">
    
    
      
        <title>Criptografía 2: Firmas - conocimiento-en-bits</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.5143246d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-integridad-firmas-y-autenticacion" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="conocimiento-en-bits" class="md-header__button md-logo" aria-label="conocimiento-en-bits" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            conocimiento-en-bits
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Criptografía 2: Firmas
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="conocimiento-en-bits" class="md-nav__button md-logo" aria-label="conocimiento-en-bits" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    conocimiento-en-bits
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Principal
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          2º ASIR 21/22
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2º ASIR 21/22" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          2º ASIR 21/22
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          SRI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SRI" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          SRI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1" type="checkbox" id="__nav_2_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_1">
          Vagrant y Ansible
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Vagrant y Ansible" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Vagrant y Ansible
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-playbook-sencillo/" class="md-nav__link">
        Ejercicio 1: Playbook sencillo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-router-nat-vagrant/" class="md-nav__link">
        Ejercicio 2: router NAT vagrant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej3-config-escenario-router-nat/" class="md-nav__link">
        Ejercicio 3: Configuración escenario router NAT
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_2" type="checkbox" id="__nav_2_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_2">
          DHCP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DHCP" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          DHCP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-instalar-configurar-dhcp/" class="md-nav__link">
        Ejercicio 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-reserva-dhcp/" class="md-nav__link">
        Ejercicio 2: reservas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-servidor-dhcp/" class="md-nav__link">
        Práctica
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3">
          HTTP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTTP" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          HTTP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-mapeo-urls-al-sistema-ficheros/" class="md-nav__link">
        Ejercicio 1: Mapeo de URLs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-control-acceso-autenticacion-autorizacion/" class="md-nav__link">
        Ejercicio 2: Control de acceso
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej3-apache-.htaccess/" class="md-nav__link">
        Ejercicio 3: .htaccess con Apache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej4-modulos-apache/" class="md-nav__link">
        Ejercicio 4: Módulos en Apache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej5-vps/" class="md-nav__link">
        Ejercicio 5: VPS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej6-apache-proxy-inverso/" class="md-nav__link">
        Ejercicio 6: Apache proxy inverso
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica3-LEMP-VPS/" class="md-nav__link">
        Práctica: LEMP en VPS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4" type="checkbox" id="__nav_2_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_4">
          DNS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DNS" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          DNS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-instalar-configurar-bind9/" class="md-nav__link">
        Ejercicio 1: bind9
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-instalar-configurar-slave/" class="md-nav__link">
        Ejercicio 2: Slave DNS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej3-delegacion-subdominio-bind9/" class="md-nav__link">
        Ejercicio 3: Delegación subdominios
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-web-bd-dns-escenario/" class="md-nav__link">
        Práctica: DNS+Web+BD en escenario
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_5" type="checkbox" id="__nav_2_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_5">
          HTTPS (1ª Parte)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTTPS (1ª Parte)" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          HTTPS (1ª Parte)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-https-vps/" class="md-nav__link">
        Práctica: HTTPS en VPS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_6" type="checkbox" id="__nav_2_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_6">
          HTTP (2ª Parte)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTTP (2ª Parte)" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_6">
          <span class="md-nav__icon md-icon"></span>
          HTTP (2ª Parte)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-aumento-rendimiento-web/" class="md-nav__link">
        Práctica: Aumento rendimiento web
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_7" type="checkbox" id="__nav_2_1_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_7">
          Correo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Correo" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_7">
          <span class="md-nav__icon md-icon"></span>
          Correo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ejercicios-correo/" class="md-nav__link">
        Ejercicios en escenario libvirt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-servidor-correo/" class="md-nav__link">
        Práctica: Servidor de correos en VPS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_8" type="checkbox" id="__nav_2_1_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_8">
          HA Clusters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HA Clusters" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_8">
          <span class="md-nav__icon md-icon"></span>
          HA Clusters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-cluster-ha/" class="md-nav__link">
        Práctica
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          IAW
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IAW" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          IAW
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2021-09-22-ej1-pull-request/" class="md-nav__link">
        ej1-pull-request
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2021-10-5-implantacion-despliegue-aplicacion-web-estatica/" class="md-nav__link">
        app-web-estatica
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2021-10-14-ej2-pr-pag-compa%C3%B1ero/" class="md-nav__link">
        ej2-pr-pag-compañero
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_4" type="checkbox" id="__nav_2_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_4">
          PHP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="PHP" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          PHP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-phpmyadmin/" class="md-nav__link">
        Ejercicio 1: phpMyAdmin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-bookmedik/" class="md-nav__link">
        Ejercicio 2: BookMedik
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej3-phpfpm/" class="md-nav__link">
        Ejercicio 3: php-fpm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica1-implantacion-apps-php/" class="md-nav__link">
        Práctica 1: Apps PHP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica2-instalacion-migracion-apps-PHP-en-VPS/" class="md-nav__link">
        Práctica 2: Instalación/migración de apps a VPS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_5" type="checkbox" id="__nav_2_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_5">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_5">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-apps-flask-apache2-mod_wsgi/" class="md-nav__link">
        Ejercicio 1: Apache + mod_wsgi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-apache2-gunicorn/" class="md-nav__link">
        Ejercicio 2: Apache/Nginx + Gunicorn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej3-apache-uwsgi/" class="md-nav__link">
        Ejercicio 3: Apache/Nginx + uWSGI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-despliegue-apps-python/" class="md-nav__link">
        Práctica: Despliegue python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-cms-python/" class="md-nav__link">
        Práctica: CMS python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          SAD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SAD" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          SAD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-cifrado-asimetrico-gpg-openssl/" class="md-nav__link">
        Criptografía 1: Cifrado asímetrico
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Criptografía 2: Firmas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Criptografía 2: Firmas
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tarea-1-firmas-electronicas" class="md-nav__link">
    Tarea 1: Firmas electrónicas
  </a>
  
    <nav class="md-nav" aria-label="Tarea 1: Firmas electrónicas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    1.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3
  </a>
  
    <nav class="md-nav" aria-label="1.3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    1.3.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132" class="md-nav__link">
    1.3.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#133" class="md-nav__link">
    1.3.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#134" class="md-nav__link">
    1.3.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#135" class="md-nav__link">
    1.3.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#136" class="md-nav__link">
    1.3.6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#137" class="md-nav__link">
    1.3.7
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    1.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    1.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16" class="md-nav__link">
    1.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-2-correo-seguro-con-evolution" class="md-nav__link">
    Tarea 2: Correo seguro con Evolution
  </a>
  
    <nav class="md-nav" aria-label="Tarea 2: Correo seguro con Evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    2.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    2.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25" class="md-nav__link">
    2.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26" class="md-nav__link">
    2.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-3-integridad-de-ficheros" class="md-nav__link">
    Tarea 3: Integridad de ficheros
  </a>
  
    <nav class="md-nav" aria-label="Tarea 3: Integridad de ficheros">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    3.3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-4-integridad-y-autenticidad-apt-secure" class="md-nav__link">
    Tarea 4: Integridad y autenticidad (apt-secure)
  </a>
  
    <nav class="md-nav" aria-label="Tarea 4: Integridad y autenticidad (apt-secure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    4.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    4.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    4.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" class="md-nav__link">
    4.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-5-autenticacion-en-ssh" class="md-nav__link">
    Tarea 5: Autenticación en SSH
  </a>
  
    <nav class="md-nav" aria-label="Tarea 5: Autenticación en SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    5.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    5.2
  </a>
  
    <nav class="md-nav" aria-label="5.2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#con-contrasena" class="md-nav__link">
    Con contraseña
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#con-par-de-claves" class="md-nav__link">
    Con par de claves
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    5.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    5.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55" class="md-nav__link">
    5.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56" class="md-nav__link">
    5.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-vpn-sad/" class="md-nav__link">
        Práctica: VPN
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_4" type="checkbox" id="__nav_2_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3_4">
          Cortafuegos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cortafuegos" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_4">
          <span class="md-nav__icon md-icon"></span>
          Cortafuegos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-iptables-nodo/" class="md-nav__link">
        Ejercicio 1 iptables: por nodo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej1-nftables-nodo/" class="md-nav__link">
        Ejercicio 1 nftables: por nodo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-iptables-perimetral/" class="md-nav__link">
        Ejercicio 2 iptables: perimetral
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ej2-nftables-perimetral/" class="md-nav__link">
        Ejercicio 2 nftables: perimetral
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../perimetral-iptables-escenario/" class="md-nav__link">
        Práctica iptables: perimetral escenario
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../practica-escenario-libvirt/" class="md-nav__link">
        Escenario libvirt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tarea-1-firmas-electronicas" class="md-nav__link">
    Tarea 1: Firmas electrónicas
  </a>
  
    <nav class="md-nav" aria-label="Tarea 1: Firmas electrónicas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    1.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3
  </a>
  
    <nav class="md-nav" aria-label="1.3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    1.3.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132" class="md-nav__link">
    1.3.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#133" class="md-nav__link">
    1.3.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#134" class="md-nav__link">
    1.3.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#135" class="md-nav__link">
    1.3.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#136" class="md-nav__link">
    1.3.6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#137" class="md-nav__link">
    1.3.7
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    1.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    1.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16" class="md-nav__link">
    1.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-2-correo-seguro-con-evolution" class="md-nav__link">
    Tarea 2: Correo seguro con Evolution
  </a>
  
    <nav class="md-nav" aria-label="Tarea 2: Correo seguro con Evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    2.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    2.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25" class="md-nav__link">
    2.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26" class="md-nav__link">
    2.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-3-integridad-de-ficheros" class="md-nav__link">
    Tarea 3: Integridad de ficheros
  </a>
  
    <nav class="md-nav" aria-label="Tarea 3: Integridad de ficheros">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    3.3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-4-integridad-y-autenticidad-apt-secure" class="md-nav__link">
    Tarea 4: Integridad y autenticidad (apt-secure)
  </a>
  
    <nav class="md-nav" aria-label="Tarea 4: Integridad y autenticidad (apt-secure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    4.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    4.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    4.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" class="md-nav__link">
    4.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tarea-5-autenticacion-en-ssh" class="md-nav__link">
    Tarea 5: Autenticación en SSH
  </a>
  
    <nav class="md-nav" aria-label="Tarea 5: Autenticación en SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    5.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    5.2
  </a>
  
    <nav class="md-nav" aria-label="5.2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#con-contrasena" class="md-nav__link">
    Con contraseña
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#con-par-de-claves" class="md-nav__link">
    Con par de claves
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    5.3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    5.4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55" class="md-nav__link">
    5.5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56" class="md-nav__link">
    5.6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="practica-integridad-firmas-y-autenticacion">Práctica: Integridad, firmas y autenticación</h1>
<h2 id="tarea-1-firmas-electronicas">Tarea 1: Firmas electrónicas</h2>
<h3 id="11">1.1</h3>
<blockquote>
<p>Enviar un fichero y la firma del mismo a Carlos</p>
</blockquote>
<p>Enviaré:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-0-1"></a><span class="go">-rw-r--r-- 1 vagrant vagrant 28 Apr 28 01:03 paracarlos.txt</span>
</code></pre></div>
<p>Genero la firma:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-1-1"></a><span class="go">gpg --detach-sign paracarlos.txt</span>
</code></pre></div>
<p>Obtengo:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-2-1"></a><span class="go">-rw-r--r-- 1 vagrant vagrant       438 Apr 28 01:12 paracarlos.txt.sig</span>
</code></pre></div>
<p>Esta firma también la enviaré.<br />
Ambos ficheros enviados por scp.</p>
<blockquote>
<p>Verificar la firma recibida</p>
</blockquote>
<p>Recibo por scp:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-3-1"></a><span class="go">-rw-r--r-- 1 vagrant vagrant        28 May 15 11:02 paraadrian.txt</span>
<a name="__codelineno-3-2"></a><span class="go">-rw-r--r-- 1 vagrant vagrant       438 May 15 11:02 paraadrian.txt.sig</span>
</code></pre></div>
<p>Verifico la firma:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-4-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --verify paraadrian.txt.sig paraadrian.txt
<a name="__codelineno-4-2"></a><span class="go">gpg: Signature made Sun May 15 10:44:25 2022 UTC</span>
<a name="__codelineno-4-3"></a><span class="go">gpg:                using RSA key 4E8FF10EDF312F43014B7AE13F6189C8E59B7714</span>
<a name="__codelineno-4-4"></a><span class="go">gpg: Good signature from &quot;Carlos Rivero &lt;carlosrivero198@gmail.com&gt;&quot; [unknown]</span>
<a name="__codelineno-4-5"></a><span class="go">gpg: WARNING: This key is not certified with a trusted signature!</span>
<a name="__codelineno-4-6"></a><span class="go">gpg:          There is no indication that the signature belongs to the owner.</span>
<a name="__codelineno-4-7"></a><span class="go">Primary key fingerprint: 4E8F F10E DF31 2F43 014B  7AE1 3F61 89C8 E59B 7714</span>
</code></pre></div>
<p>La verificación ha sido correcta.</p>
<h3 id="12">1.2</h3>
<blockquote>
<p>¿Qué significa este mensaje al verificar la firma?</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-5-1"></a><span class="go"> gpg: Firma correcta de &quot;Pepe D &lt;josedom24@gmail.com&gt;&quot; [desconocido]</span>
<a name="__codelineno-5-2"></a><span class="go"> gpg: ATENCIÓN: ¡Esta clave no está certificada por una firma de confianza!</span>
<a name="__codelineno-5-3"></a><span class="go"> gpg:          No hay indicios de que la firma pertenezca al propietario.</span>
<a name="__codelineno-5-4"></a><span class="go"> Huellas dactilares de la clave primaria: E8DD 5DA9 3B88 F08A DA1D  26BF 5141 3DDB 0C99 55FC</span>
</code></pre></div>
<p>Significa que la clave pública con la que se ha verificado la firma, no es una clave en la que yo confíe / haya firmado.</p>
<p>Por ejemplo, puede suceder cuando la trust es "unknown", como ha sido el caso del apartado anterior.</p>
<h3 id="13">1.3</h3>
<p>En este apartado crearemos un anillo de confianza entre varios compañeros.</p>
<h4 id="131">1.3.1</h4>
<blockquote>
<p>Subir tu clave pública a <code>pgp.rediris.es</code></p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-6-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --keyserver pgp.rediris.es --send-keys 69172731E9645F6ACB60CCBA0C3C966CD1DC1A62
<a name="__codelineno-6-2"></a><span class="go">gpg: sending key 0C3C966CD1DC1A62 to hkp://pgp.rediris.es</span>
</code></pre></div>
<p>Compruebo que se ha subido correctamente:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-7-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --keyserver pgp.rediris.es --search-keys 69172731E9645F6ACB60CCBA0C3C966CD1DC1A62
<a name="__codelineno-7-2"></a><span class="go">gpg: data source: http://130.206.1.8:11371</span>
<a name="__codelineno-7-3"></a><span class="gp gp-VirtualEnv">(1)</span> <span class="go">Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-7-4"></a><span class="go">      3072 bit RSA key 0C3C966CD1DC1A62, created: 2022-05-16, expires: 2024-05-15</span>
<a name="__codelineno-7-5"></a><span class="go">Keys 1-1 of 1 for &quot;69172731E9645F6ACB60CCBA0C3C966CD1DC1A62&quot;.  Enter number(s), N)ext, or Q)uit &gt;</span>
</code></pre></div>
<h4 id="132">1.3.2</h4>
<blockquote>
<p>Pasar el fingerprint de tu clave subida a tus compañeros para que la puedan descargar</p>
</blockquote>
<p>Hecho.</p>
<h4 id="133">1.3.3</h4>
<blockquote>
<p>Bajar y firmar tres claves públicas de compañeros</p>
</blockquote>
<p>Me bajo la de Carlos:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-8-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --keyserver pgp.rediris.es --receive-keys 3F6189C8E59B7714
<a name="__codelineno-8-2"></a><span class="go">gpg: key 3F6189C8E59B7714: public key &quot;Carlos Rivero &lt;carlosrivero198@gmail.com&gt;&quot; imported</span>
<a name="__codelineno-8-3"></a><span class="go">gpg: Total number processed: 1</span>
<a name="__codelineno-8-4"></a><span class="go">gpg:               imported: 1</span>
</code></pre></div>
<p>La firmo:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-9-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --sign-key 3F6189C8E59B7714
<a name="__codelineno-9-2"></a>
<a name="__codelineno-9-3"></a><span class="go">pub  rsa3072/3F6189C8E59B7714</span>
<a name="__codelineno-9-4"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: SC</span>
<a name="__codelineno-9-5"></a><span class="go">     trust: unknown       validity: unknown</span>
<a name="__codelineno-9-6"></a><span class="go">sub  rsa3072/1707D1A73D4578B2</span>
<a name="__codelineno-9-7"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: E</span>
<a name="__codelineno-9-8"></a><span class="go">[ unknown] (1). Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-9-9"></a>
<a name="__codelineno-9-10"></a>
<a name="__codelineno-9-11"></a><span class="go">pub  rsa3072/3F6189C8E59B7714</span>
<a name="__codelineno-9-12"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: SC</span>
<a name="__codelineno-9-13"></a><span class="go">     trust: unknown       validity: unknown</span>
<a name="__codelineno-9-14"></a><span class="go"> Primary key fingerprint: 4E8F F10E DF31 2F43 014B  7AE1 3F61 89C8 E59B 7714</span>
<a name="__codelineno-9-15"></a>
<a name="__codelineno-9-16"></a><span class="go">     Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-9-17"></a>
<a name="__codelineno-9-18"></a><span class="go">This key is due to expire on 2024-05-14.</span>
<a name="__codelineno-9-19"></a><span class="go">Are you sure that you want to sign this key with your</span>
<a name="__codelineno-9-20"></a><span class="go">key &quot;Adrian Jaramillo &lt;adristudy@gmail.com&gt;&quot; (0C3C966CD1DC1A62)</span>
<a name="__codelineno-9-21"></a>
<a name="__codelineno-9-22"></a><span class="go">Really sign? (y/N) y</span>
</code></pre></div>
<p>Muestro que se aplicó correctamente:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-10-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --list-sig 4E8FF10EDF312F43014B7AE13F6189C8E59B7714
<a name="__codelineno-10-2"></a><span class="go">pub   rsa3072 2022-05-15 [SC] [expires: 2024-05-14]</span>
<a name="__codelineno-10-3"></a><span class="go">      4E8FF10EDF312F43014B7AE13F6189C8E59B7714</span>
<a name="__codelineno-10-4"></a><span class="go">uid           [  full  ] Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-10-5"></a><span class="go">sig 3        3F6189C8E59B7714 2022-05-15  Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-10-6"></a><span class="go">sig          0C3C966CD1DC1A62 2022-05-16  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-10-7"></a><span class="go">sub   rsa3072 2022-05-15 [E] [expires: 2024-05-14]</span>
<a name="__codelineno-10-8"></a><span class="go">sig          3F6189C8E59B7714 2022-05-15  Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
</code></pre></div>
<p>Me bajo la de Daniel:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-11-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --keyserver pgp.rediris.es --receive-keys 82805738F5FF4457
<a name="__codelineno-11-2"></a><span class="go">gpg: key 82805738F5FF4457: public key &quot;Daniel Parrales &lt;daniparrales1@gmail.com&gt;&quot; imported</span>
<a name="__codelineno-11-3"></a><span class="go">gpg: Total number processed: 1</span>
<a name="__codelineno-11-4"></a><span class="go">gpg:               imported: 1</span>
</code></pre></div>
<p>La firmo:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-12-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --sign-key 82805738F5FF4457
<a name="__codelineno-12-2"></a>
<a name="__codelineno-12-3"></a><span class="go">pub  rsa3072/82805738F5FF4457</span>
<a name="__codelineno-12-4"></a><span class="go">     created: 2022-05-16  expires: 2024-05-15  usage: SC</span>
<a name="__codelineno-12-5"></a><span class="go">     trust: unknown       validity: unknown</span>
<a name="__codelineno-12-6"></a><span class="go">sub  rsa3072/408742D95A6657E5</span>
<a name="__codelineno-12-7"></a><span class="go">     created: 2022-05-16  expires: 2024-05-15  usage: E</span>
<a name="__codelineno-12-8"></a><span class="go">[ unknown] (1). Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
<a name="__codelineno-12-9"></a>
<a name="__codelineno-12-10"></a>
<a name="__codelineno-12-11"></a><span class="go">pub  rsa3072/82805738F5FF4457</span>
<a name="__codelineno-12-12"></a><span class="go">     created: 2022-05-16  expires: 2024-05-15  usage: SC</span>
<a name="__codelineno-12-13"></a><span class="go">     trust: unknown       validity: unknown</span>
<a name="__codelineno-12-14"></a><span class="go"> Primary key fingerprint: 8595 30FB 6525 B22C 5F36  8117 8280 5738 F5FF 4457</span>
<a name="__codelineno-12-15"></a>
<a name="__codelineno-12-16"></a><span class="go">     Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
<a name="__codelineno-12-17"></a>
<a name="__codelineno-12-18"></a><span class="go">This key is due to expire on 2024-05-15.</span>
<a name="__codelineno-12-19"></a><span class="go">Are you sure that you want to sign this key with your</span>
<a name="__codelineno-12-20"></a><span class="go">key &quot;Adrian Jaramillo &lt;adristudy@gmail.com&gt;&quot; (0C3C966CD1DC1A62)</span>
<a name="__codelineno-12-21"></a>
<a name="__codelineno-12-22"></a><span class="go">Really sign? (y/N) y</span>
</code></pre></div>
<p>Muestro que se aplicó correctamente:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-13-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --list-sig 82805738F5FF4457
<a name="__codelineno-13-2"></a><span class="go">pub   rsa3072 2022-05-16 [SC] [expires: 2024-05-15]</span>
<a name="__codelineno-13-3"></a><span class="go">      859530FB6525B22C5F36811782805738F5FF4457</span>
<a name="__codelineno-13-4"></a><span class="go">uid           [  full  ] Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
<a name="__codelineno-13-5"></a><span class="go">sig 3        82805738F5FF4457 2022-05-16  Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
<a name="__codelineno-13-6"></a><span class="go">sig          0C3C966CD1DC1A62 2022-06-07  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-13-7"></a><span class="go">sub   rsa3072 2022-05-16 [E] [expires: 2024-05-15]</span>
<a name="__codelineno-13-8"></a><span class="go">sig          82805738F5FF4457 2022-05-16  Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
</code></pre></div>
<p>Me bajo la de Lara:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-14-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --keyserver pgp.rediris.es --receive-keys EB5FEF455BD986A0
<a name="__codelineno-14-2"></a><span class="go">gpg: key EB5FEF455BD986A0: public key &quot;Lara Pruna Ternero &lt;laraprute@gmail.com&gt;&quot; imported</span>
<a name="__codelineno-14-3"></a><span class="go">gpg: Total number processed: 1</span>
<a name="__codelineno-14-4"></a><span class="go">gpg:               imported: 1</span>
</code></pre></div>
<p>La firmo:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-15-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --sign-key EB5FEF455BD986A0
<a name="__codelineno-15-2"></a>
<a name="__codelineno-15-3"></a><span class="go">pub  rsa3072/EB5FEF455BD986A0</span>
<a name="__codelineno-15-4"></a><span class="go">     created: 2022-06-07  expires: 2024-06-06  usage: SC</span>
<a name="__codelineno-15-5"></a><span class="go">     trust: unknown       validity: unknown</span>
<a name="__codelineno-15-6"></a><span class="go">sub  rsa3072/C1F92F5A0AEA093D</span>
<a name="__codelineno-15-7"></a><span class="go">     created: 2022-06-07  expires: 2024-06-06  usage: E</span>
<a name="__codelineno-15-8"></a><span class="go">[ unknown] (1). Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
<a name="__codelineno-15-9"></a>
<a name="__codelineno-15-10"></a>
<a name="__codelineno-15-11"></a><span class="go">pub  rsa3072/EB5FEF455BD986A0</span>
<a name="__codelineno-15-12"></a><span class="go">     created: 2022-06-07  expires: 2024-06-06  usage: SC</span>
<a name="__codelineno-15-13"></a><span class="go">     trust: unknown       validity: unknown</span>
<a name="__codelineno-15-14"></a><span class="go"> Primary key fingerprint: 8317 2CA2 F8FC 2124 94CB  677D EB5F EF45 5BD9 86A0</span>
<a name="__codelineno-15-15"></a>
<a name="__codelineno-15-16"></a><span class="go">     Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
<a name="__codelineno-15-17"></a>
<a name="__codelineno-15-18"></a><span class="go">This key is due to expire on 2024-06-06.</span>
<a name="__codelineno-15-19"></a><span class="go">Are you sure that you want to sign this key with your</span>
<a name="__codelineno-15-20"></a><span class="go">key &quot;Adrian Jaramillo &lt;adristudy@gmail.com&gt;&quot; (0C3C966CD1DC1A62)</span>
<a name="__codelineno-15-21"></a>
<a name="__codelineno-15-22"></a><span class="go">Really sign? (y/N) y</span>
</code></pre></div>
<p>Muestro que se aplicó correctamente:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-16-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --list-sig EB5FEF455BD986A0
<a name="__codelineno-16-2"></a><span class="go">pub   rsa3072 2022-06-07 [SC] [expires: 2024-06-06]</span>
<a name="__codelineno-16-3"></a><span class="go">      83172CA2F8FC212494CB677DEB5FEF455BD986A0</span>
<a name="__codelineno-16-4"></a><span class="go">uid           [  full  ] Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
<a name="__codelineno-16-5"></a><span class="go">sig 3        EB5FEF455BD986A0 2022-06-07  Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
<a name="__codelineno-16-6"></a><span class="go">sig          0C3C966CD1DC1A62 2022-06-07  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-16-7"></a><span class="go">sub   rsa3072 2022-06-07 [E] [expires: 2024-06-06]</span>
<a name="__codelineno-16-8"></a><span class="go">sig          EB5FEF455BD986A0 2022-06-07  Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
</code></pre></div>
<h4 id="134">1.3.4</h4>
<blockquote>
<p>Tu clave pública tiene que tener 3 firmas</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-17-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --list-sigs adristudy@gmail.com
<a name="__codelineno-17-2"></a><span class="go">pub   rsa3072 2022-05-16 [SC] [expires: 2024-05-15]</span>
<a name="__codelineno-17-3"></a><span class="go">      69172731E9645F6ACB60CCBA0C3C966CD1DC1A62</span>
<a name="__codelineno-17-4"></a><span class="go">uid           [ultimate] Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-17-5"></a><span class="go">sig 3        0C3C966CD1DC1A62 2022-05-16  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-17-6"></a><span class="go">sig          3F6189C8E59B7714 2022-06-07  Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-17-7"></a><span class="go">sig          82805738F5FF4457 2022-06-07  Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
<a name="__codelineno-17-8"></a><span class="go">sig          EB5FEF455BD986A0 2022-06-07  Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
<a name="__codelineno-17-9"></a><span class="go">sub   rsa3072 2022-05-16 [E] [expires: 2024-05-15]</span>
<a name="__codelineno-17-10"></a><span class="go">sig          0C3C966CD1DC1A62 2022-05-16  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
</code></pre></div>
<h4 id="135">1.3.5</h4>
<blockquote>
<p>Al firmar claves, devolverlas a su dueño</p>
</blockquote>
<p>Todas las exporto de esta manera:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-18-1"></a><span class="go">gpg --export -a carlosrivero198@gmail.com &gt; publiccarlos.key</span>
</code></pre></div>
<h4 id="136">1.3.6</h4>
<blockquote>
<p>Subir a <code>pgp.rediris.es</code> tu clave cuando tenga tres firmas</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-19-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --keyserver pgp.rediris.es --send-key 69172731E9645F6ACB60CCBA0C3C966CD1DC1A62
<a name="__codelineno-19-2"></a><span class="go">gpg: sending key 0C3C966CD1DC1A62 to hkp://pgp.rediris.es</span>
</code></pre></div>
<p>Muestro las 3 firmas en el keyserver:</p>
<p><img alt="miclaveconfirmas" src="https://i.postimg.cc/rp2cHB9p/3-firmas-miclave.png" /></p>
<blockquote>
<p>Rellenar datos de tu clave pública <a href="https://dit.gonzalonazareno.org/redmine/projects/asir2/wiki/Claves_p%C3%BAblicas_PGP_2021-2022">aquí</a></p>
</blockquote>
<p><img alt="miclavedeclase" src="https://i.imgur.com/ceSgH9c.png" /></p>
<h4 id="137">1.3.7</h4>
<blockquote>
<p>Bajar las claves públicas de tus compañeros con tres firmas</p>
</blockquote>
<p>Todas se bajarán de la misma manera:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-20-1"></a><span class="go">gpg --keyserver pgp.rediris.es --recv-key 3F6189C8E59B7714</span>
</code></pre></div>
<p><strong>IMPORTANTE: AL BAJAR DIRECTAMENTE LAS CLAVES DE ESTA MANERA LAS FIRMAS SE ELIMINAN, ASÍ QUE ES MEJOR IMPORTAR LAS CLAVES DESDE UN FICHERO Y ASÍ MANTENDREMOS LAS FIRMAS</strong></p>
<h3 id="14">1.4</h3>
<blockquote>
<p>Mostrar las firmas de tu clave pública</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-21-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --list-sigs adristudy@gmail.com
<a name="__codelineno-21-2"></a><span class="go">pub   rsa3072 2022-05-16 [SC] [expires: 2024-05-15]</span>
<a name="__codelineno-21-3"></a><span class="go">      69172731E9645F6ACB60CCBA0C3C966CD1DC1A62</span>
<a name="__codelineno-21-4"></a><span class="go">uid           [ultimate] Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-21-5"></a><span class="go">sig 3        0C3C966CD1DC1A62 2022-05-16  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
<a name="__codelineno-21-6"></a><span class="go">sig          3F6189C8E59B7714 2022-06-07  Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-21-7"></a><span class="go">sig          82805738F5FF4457 2022-06-07  Daniel Parrales &lt;daniparrales1@gmail.com&gt;</span>
<a name="__codelineno-21-8"></a><span class="go">sig          EB5FEF455BD986A0 2022-06-07  Lara Pruna Ternero &lt;laraprute@gmail.com&gt;</span>
<a name="__codelineno-21-9"></a><span class="go">sub   rsa3072 2022-05-16 [E] [expires: 2024-05-15]</span>
<a name="__codelineno-21-10"></a><span class="go">sig          0C3C966CD1DC1A62 2022-05-16  Adrian Jaramillo &lt;adristudy@gmail.com&gt;</span>
</code></pre></div>
<h3 id="15">1.5</h3>
<blockquote>
<p>Comprobar que se puede verificar "sin problemas” la firma de Carlos, porque ya se confía</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-22-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --verify paraadrian.txt.sig paraadrian.txt
<a name="__codelineno-22-2"></a><span class="go">gpg: Signature made Sun May 15 10:44:25 2022 UTC</span>
<a name="__codelineno-22-3"></a><span class="go">gpg:                using RSA key 4E8FF10EDF312F43014B7AE13F6189C8E59B7714</span>
<a name="__codelineno-22-4"></a><span class="go">gpg: Good signature from &quot;Carlos Rivero &lt;carlosrivero198@gmail.com&gt;&quot; [full]</span>
</code></pre></div>
<h3 id="16">1.6</h3>
<blockquote>
<p>Comprobar que puedes verificar con confianza una firma de una persona en la que no confías, pero sin embargo si confía otra persona en la que tu tienes confianza total</p>
</blockquote>
<p>En este apartado vamos a intentar verificar una firma de Miguel:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-23-1"></a><span class="go">-rw-r--r-- 1 vagrant vagrant        16 Jun  8 06:17 paraadriandemiguel.txt</span>
<a name="__codelineno-23-2"></a><span class="go">-rw-r--r-- 1 vagrant vagrant       438 Jun  8 06:18 paraadriandemiguel.txt.sig</span>
</code></pre></div>
<p>Tenemos su clave pública firmada por Carlos (en el que confiamos), pero la propia clave de Miguel nosotros no la hemos firmado, por lo que no confiamos:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-24-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --list-sigs miguelcor.rrs@gmail.com
<a name="__codelineno-24-2"></a><span class="go">pub   rsa3072 2022-06-07 [SC] [expires: 2024-06-06]</span>
<a name="__codelineno-24-3"></a><span class="go">      5173B9123875E25C833A855307F879A05A4147C3</span>
<a name="__codelineno-24-4"></a><span class="go">uid           [  undef ] Miguel Cordoba &lt;miguelcor.rrs@gmail.com&gt;</span>
<a name="__codelineno-24-5"></a><span class="go">sig 3        07F879A05A4147C3 2022-06-07  Miguel Cordoba &lt;miguelcor.rrs@gmail.com&gt;</span>
<a name="__codelineno-24-6"></a><span class="go">sig          3F6189C8E59B7714 2022-06-07  Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-24-7"></a><span class="go">sub   rsa3072 2022-06-07 [E] [expires: 2024-06-06]</span>
<a name="__codelineno-24-8"></a><span class="go">sig          07F879A05A4147C3 2022-06-07  Miguel Cordoba &lt;miguelcor.rrs@gmail.com&gt;</span>
</code></pre></div>
<p>Bien, si intentamos verificar la firma de Miguel, ¿debería de no haber errores verdad? Porque como dijimos, Carlos firmó la de Miguel, y yo confío en Carlos.</p>
<p>Hagamos la prueba:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-25-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --verify paraadriandemiguel.txt.sig paraadriandemiguel.txt
<a name="__codelineno-25-2"></a><span class="go">gpg: Signature made Wed Jun  8 06:15:58 2022 UTC</span>
<a name="__codelineno-25-3"></a><span class="go">gpg:                using RSA key 5173B9123875E25C833A855307F879A05A4147C3</span>
<a name="__codelineno-25-4"></a><span class="go">gpg: Good signature from &quot;Miguel Cordoba &lt;miguelcor.rrs@gmail.com&gt;&quot; [undefined]</span>
<a name="__codelineno-25-5"></a><span class="go">gpg: WARNING: This key is not certified with a trusted signature!</span>
<a name="__codelineno-25-6"></a><span class="go">gpg:          There is no indication that the signature belongs to the owner.</span>
<a name="__codelineno-25-7"></a><span class="go">Primary key fingerprint: 5173 B912 3875 E25C 833A  8553 07F8 79A0 5A41 47C3</span>
</code></pre></div>
<p>Error. ¿Por qué ha sucedido esto?</p>
<p>Pues bien, debemos explicar antes 2 conceptos fundamentales, <strong>trust y validity</strong>:</p>
<ul>
<li><strong>TRUST</strong>: la trust se configura manualmente. Describe si una clave puede firmar otras claves, y que se confíen en ellas aunque yo directamente no confíe (permite la confianza en terceros). Ej: Si se confía completamente en una persona "A", y esa persona firma la clave de una persona "B", automáticamente veremos la clave de "B" como válida.</li>
<li><strong>VALIDITY</strong>: la validez en diferencia con la trust, sí puede ser automática. Describe si una clave tiene las suficientes firmas para que se pruebe que es la clave correcta (cuando nosotros firmamos una clave, automáticamente la validez pasa a "full")</li>
</ul>
<p>Habiendo dicho esto, entonces lo que ha debido pasar es que no tenemos confianza en la clave de Carlos, aunque la validez esté a full porque la firmamos en su momento. Es decir, sabemos que la clave de Carlos es de verdad de Carlos, pero no confiamos en que Carlos firme otras claves, y luego nos creamos que esas otras son verdaderas.</p>
<p>Vamos a mostrar los datos de la clave de Carlos para comprobar lo ya dicho:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-26-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --edit-key carlosrivero198@gmail.com
<a name="__codelineno-26-2"></a><span class="go">gpg (GnuPG) 2.2.27; Copyright (C) 2021 Free Software Foundation, Inc.</span>
<a name="__codelineno-26-3"></a><span class="go">This is free software: you are free to change and redistribute it.</span>
<a name="__codelineno-26-4"></a><span class="go">There is NO WARRANTY, to the extent permitted by law.</span>
<a name="__codelineno-26-5"></a>
<a name="__codelineno-26-6"></a>
<a name="__codelineno-26-7"></a><span class="go">pub  rsa3072/3F6189C8E59B7714</span>
<a name="__codelineno-26-8"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: SC</span>
<a name="__codelineno-26-9"></a><span class="go">     trust: unknown       validity: full</span>
<a name="__codelineno-26-10"></a><span class="go">sub  rsa3072/1707D1A73D4578B2</span>
<a name="__codelineno-26-11"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: E</span>
<a name="__codelineno-26-12"></a><span class="go">[  full  ] (1). Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-26-13"></a>
<a name="__codelineno-26-14"></a><span class="go">gpg&gt;</span>
</code></pre></div>
<p>Está ocurriendo tal y como hemos explicado antes, la trust es "unknown" y la validity es "full". No estamos confiando en las firmas a terceros de Carlos.</p>
<p>¿Entonces qué debemos hacer?</p>
<p>Cambiar la trust en la clave de Carlos para que confiemos en sus firmas a terceros. Debemos configurar el nivel de trust a 4, o full. Lo hacemos así:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-27-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --edit-key 4E8FF10EDF312F43014B7AE13F6189C8E59B7714 trust
<a name="__codelineno-27-2"></a><span class="go">gpg (GnuPG) 2.2.27; Copyright (C) 2021 Free Software Foundation, Inc.</span>
<a name="__codelineno-27-3"></a><span class="go">This is free software: you are free to change and redistribute it.</span>
<a name="__codelineno-27-4"></a><span class="go">There is NO WARRANTY, to the extent permitted by law.</span>
<a name="__codelineno-27-5"></a>
<a name="__codelineno-27-6"></a>
<a name="__codelineno-27-7"></a><span class="go">pub  rsa3072/3F6189C8E59B7714</span>
<a name="__codelineno-27-8"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: SC</span>
<a name="__codelineno-27-9"></a><span class="go">     trust: unknown       validity: full</span>
<a name="__codelineno-27-10"></a><span class="go">sub  rsa3072/1707D1A73D4578B2</span>
<a name="__codelineno-27-11"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: E</span>
<a name="__codelineno-27-12"></a><span class="go">[  full  ] (1). Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-27-13"></a>
<a name="__codelineno-27-14"></a><span class="go">pub  rsa3072/3F6189C8E59B7714</span>
<a name="__codelineno-27-15"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: SC</span>
<a name="__codelineno-27-16"></a><span class="go">     trust: unknown       validity: full</span>
<a name="__codelineno-27-17"></a><span class="go">sub  rsa3072/1707D1A73D4578B2</span>
<a name="__codelineno-27-18"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: E</span>
<a name="__codelineno-27-19"></a><span class="go">[  full  ] (1). Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-27-20"></a>
<a name="__codelineno-27-21"></a><span class="go">Please decide how far you trust this user to correctly verify other users&#39; keys</span>
<a name="__codelineno-27-22"></a><span class="gp gp-VirtualEnv">(by looking at passports, checking fingerprints from different sources, etc.)</span>
<a name="__codelineno-27-23"></a>
<a name="__codelineno-27-24"></a><span class="go">  1 = I don&#39;t know or won&#39;t say</span>
<a name="__codelineno-27-25"></a><span class="go">  2 = I do NOT trust</span>
<a name="__codelineno-27-26"></a><span class="go">  3 = I trust marginally</span>
<a name="__codelineno-27-27"></a><span class="go">  4 = I trust fully</span>
<a name="__codelineno-27-28"></a><span class="go">  5 = I trust ultimately</span>
<a name="__codelineno-27-29"></a><span class="go">  m = back to the main menu</span>
<a name="__codelineno-27-30"></a>
<a name="__codelineno-27-31"></a><span class="go">Your decision? 4</span>
<a name="__codelineno-27-32"></a>
<a name="__codelineno-27-33"></a><span class="go">pub  rsa3072/3F6189C8E59B7714</span>
<a name="__codelineno-27-34"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: SC</span>
<a name="__codelineno-27-35"></a><span class="go">     trust: full          validity: full</span>
<a name="__codelineno-27-36"></a><span class="go">sub  rsa3072/1707D1A73D4578B2</span>
<a name="__codelineno-27-37"></a><span class="go">     created: 2022-05-15  expires: 2024-05-14  usage: E</span>
<a name="__codelineno-27-38"></a><span class="go">[  full  ] (1). Carlos Rivero &lt;carlosrivero198@gmail.com&gt;</span>
<a name="__codelineno-27-39"></a><span class="go">Please note that the shown key validity is not necessarily correct</span>
<a name="__codelineno-27-40"></a><span class="go">unless you restart the program.</span>
<a name="__codelineno-27-41"></a>
<a name="__codelineno-27-42"></a><span class="go">gpg&gt; quit</span>
</code></pre></div>
<p>Ahora la trust está a full como podemos observar.</p>
<p>Pues bien, ahora sí podremos verificar correctamente la firma de Miguel, porque ahora confiamos en las firmas de Carlos a terceros. Por esto, en nuestro listado de claves, ahora la clave de Miguel es confiada de forma full:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-28-1"></a><span class="go">pub   rsa3072 2022-06-07 [SC] [expires: 2024-06-06]</span>
<a name="__codelineno-28-2"></a><span class="go">      5173B9123875E25C833A855307F879A05A4147C3</span>
<a name="__codelineno-28-3"></a><span class="go">uid           [  full  ] Miguel Cordoba &lt;miguelcor.rrs@gmail.com&gt;</span>
<a name="__codelineno-28-4"></a><span class="go">sub   rsa3072 2022-06-07 [E] [expires: 2024-06-06]</span>
</code></pre></div>
<p>Podremos ahora verificar su firma correctamente:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-29-1"></a><span class="gp">vagrant@practicafirmas:~$</span> gpg --verify paraadriandemiguel.txt.sig paraadriandemiguel.txt
<a name="__codelineno-29-2"></a><span class="go">gpg: Signature made Wed Jun  8 06:15:58 2022 UTC</span>
<a name="__codelineno-29-3"></a><span class="go">gpg:                using RSA key 5173B9123875E25C833A855307F879A05A4147C3</span>
<a name="__codelineno-29-4"></a><span class="go">gpg: Good signature from &quot;Miguel Cordoba &lt;miguelcor.rrs@gmail.com&gt;&quot; [full]</span>
</code></pre></div>
<h2 id="tarea-2-correo-seguro-con-evolution">Tarea 2: Correo seguro con Evolution</h2>
<h3 id="21">2.1</h3>
<blockquote>
<p>Configurar una cuenta de correo</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-30-1"></a><span class="go">sudo apt install evolution</span>
</code></pre></div>
<p>Después de instalarlo y configurarlo, muestro que funciona:</p>
<p><img alt="evolution funcionando" src="https://i.imgur.com/xdvQd42.png" /></p>
<h3 id="22">2.2</h3>
<blockquote>
<p>Configurar el firmado de correos con nuestra clave privada</p>
</blockquote>
<p>Primero tenemos que llegar al menú correspondiente:</p>
<p><img alt="evolution config firmas" src="https://i.postimg.cc/prBYF7b5/llegar-config-firmado-evolution.gif" /></p>
<p>Una vez ahí, indicamos el fingerprint del par de claves con el que queremos firmar:</p>
<p><img alt="config evolution firmado" src="https://i.imgur.com/1owmbRJ.png" /></p>
<p>Para que los correos de verdad se firmen al enviarse, tenemos que marcar la siguiente opción antes de enviarlos:</p>
<p><img alt="marcar correos para firmado" src="https://i.imgur.com/sQ7B3iT.png" /></p>
<h3 id="23">2.3</h3>
<blockquote>
<p>Configurar el cifrado de correos para otros destinatarios</p>
</blockquote>
<p>Para el cifrado no hace falta que configuremos en Evolution las claves públicas, ya que las toma de nuestro keybox automáticamente según la dirección que escribamos en el <em>"To:"</em>.</p>
<p>Para que los correos de verdad se cifren al enviarse, tenemos que marcar la siguiente opción antes de enviarlos:</p>
<p><img alt="marcar correos para cifrado" src="https://i.imgur.com/rhWfSdx.png" /></p>
<h3 id="24">2.4</h3>
<blockquote>
<p>Enviar un correo firmado y cifrado a Carlos</p>
</blockquote>
<p>Este es el correo que enviaré:</p>
<p><img alt="firmado/cifrado para carlos" src="https://i.imgur.com/Yxc5hAX.png" /></p>
<p>Si yo lo intento abrir, no podré ver el contenido ya que no tengo la clave privada de Carlos para desencriptarlo:</p>
<p><img alt="intento abrir correo para carlos" src="https://i.imgur.com/znoJDqT.png" /></p>
<p>Este es el correo que le ha llegado a Carlos, desde su punto de vista, y vemos que todo es correcto:</p>
<p><img alt="correo que carlos ha recibido" src="https://i.imgur.com/5Yq8DNm.png" /></p>
<h3 id="25">2.5</h3>
<blockquote>
<p>Recibir un correo firmado y cifrado de Carlos</p>
</blockquote>
<p>Vemos que todo es correcto:</p>
<p><img alt="correo que he recibido de Carlos" src="https://i.imgur.com/sEaWbLf.png" /></p>
<h3 id="26">2.6</h3>
<blockquote>
<p>Mandar a Raúl un correo cifrado y firmado</p>
</blockquote>
<p>Busco la clave pública de Raúl en RedIRIS y me la bajo (se necesitará para encriptar):</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-31-1"></a><span class="gp">atlas@olympus:~$</span> gpg --keyserver pgp.rediris.es --search-key rruizp@gmail.com
<a name="__codelineno-31-2"></a><span class="go">gpg: data source: http://130.206.1.8:11371</span>
<a name="__codelineno-31-3"></a><span class="gp gp-VirtualEnv">(1)</span> <span class="go">Raúl Ruiz Padilla &lt;rruizp@gmail.com&gt;</span>
<a name="__codelineno-31-4"></a><span class="go">      3072 bit RSA key A036DF623D608DE0, created: 2021-11-10, expires: 2023-11-10</span>
<a name="__codelineno-31-5"></a><span class="gp gp-VirtualEnv">(2)</span> <span class="go">Raúl Ruiz (Claves para clase) &lt;rruizp@gmail.com&gt;</span>
<a name="__codelineno-31-6"></a><span class="go">      4096 bit RSA key 334BEE7E18D37DEA, created: 2017-12-16</span>
<a name="__codelineno-31-7"></a><span class="gp gp-VirtualEnv">(3)</span> <span class="go">Raul Ruiz Padilla (Clave para SAD 1617) &lt;rruizp@gmail.com&gt;</span>
<a name="__codelineno-31-8"></a><span class="go">      4096 bit RSA key F6C88DC57C2FA472, created: 2016-12-11, expires: 2018-12-10 (expired)</span>
<a name="__codelineno-31-9"></a><span class="go">Keys 1-3 of 3 for &quot;rruizp@gmail.com&quot;.  Enter number(s), N)ext, or Q)uit &gt; 1</span>
<a name="__codelineno-31-10"></a><span class="go">gpg: key A036DF623D608DE0: public key &quot;Raúl Ruiz Padilla &lt;rruizp@gmail.com&gt;&quot; imported</span>
<a name="__codelineno-31-11"></a><span class="go">gpg: Total number processed: 1</span>
<a name="__codelineno-31-12"></a><span class="go">gpg:               imported: 1</span>
</code></pre></div>
<p>Antes de enviar el correo es importante que dejemos marcada esta opción, para evitar el tener que firmar las claves públicas de las personas a quienes queramos enviar:</p>
<p><img alt="confiar en claves al encriptar" src="https://i.imgur.com/zT4Rliu.png" /></p>
<p>Este es el correo que enviaré:</p>
<p><img alt="correo enviado a raúl" src="https://i.imgur.com/tNZWIHq.png" /></p>
<p>La parte marcada en rojo quiere decir que el correo se encriptará y firmará.</p>
<p><strong>¿QUÉ TENDRÁ QUE HACER RAÚL PARA LEER ESTE CORREO CORRECTAMENTE?</strong></p>
<p>Necesitará 2 cosas:</p>
<ul>
<li>La clave privada correspondiente a la pública con la que se encriptó el correo para descifrarlo correctamente.</li>
<li>Mi clave pública para poder verificar la firma. La podrá obtener con el comando <code>gpg --keyserver pgp.rediris.es --search-key adristudy@gmail.com</code>, eligiendo la de fingerprint CA350E4C295E2EF4.</li>
</ul>
<h2 id="tarea-3-integridad-de-ficheros">Tarea 3: Integridad de ficheros</h2>
<h3 id="31">3.1</h3>
<blockquote>
<p>Descargar la ISO de Debian</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-32-1"></a><span class="go">wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-11.2.0-amd64-netinst.iso</span>
</code></pre></div>
<p>Obtengo el fichero:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-33-1"></a><span class="go">-rw-r--r-- 1 vagrant vagrant 396361728 Dec 18 13:24 debian-11.2.0-amd64-netinst.iso</span>
</code></pre></div>
<h3 id="32">3.2</h3>
<blockquote>
<p>Comprobar la integridad de la ISO descargada usando <code>sha512sum</code></p>
</blockquote>
<p>En el fichero <a href="https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA512SUMS">SHA512SUMS</a> que nos proporciona Debian, nos encontramos el siguiente checksum para la ISO descargada:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-34-1"></a><span class="go">c685b85cf9f248633ba3cd2b9f9e781fa03225587e0c332aef2063f6877a1f0622f56d44cf0690087b0ca36883147ecb5593e3da6f965968402cdbdf12f6dd74</span>
</code></pre></div>
<p>Luego utilizo <code>sha512sum</code> sobre la ISO que me he descargado:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-35-1"></a><span class="go">sha512sum debian-11.2.0-amd64-netinst.iso</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-36-1"></a><span class="go">c685b85cf9f248633ba3cd2b9f9e781fa03225587e0c332aef2063f6877a1f0622f56d44cf0690087b0ca36883147ecb5593e3da6f965968402cdbdf12f6dd74  debian-11.2.0-amd64-netinst.iso</span>
</code></pre></div>
<p>Ambos hashes coinciden, así que nos hemos descargado el fichero correctamente.</p>
<p>Igualmente, si queremos evitar errores, podemos usar <a href="https://text-compare.com/">una herramienta online</a> para comparar strings:</p>
<p><img alt="comparación de hashes" src="https://i.imgur.com/KUhapSW.png" /></p>
<h3 id="33">3.3</h3>
<blockquote>
<p>Verificar que <code>SHA512SUMS</code> no ha sido manipulado usando <code>SHA512SUMS.sign</code></p>
</blockquote>
<p>Primero descargo ambos ficheros:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-37-1"></a><span class="go">wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA512SUMS</span>
<a name="__codelineno-37-2"></a><span class="go">wget https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/SHA512SUMS.sign</span>
</code></pre></div>
<p>Muestro que los tengo:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-38-1"></a><span class="go">-rw-r--r-- 1 vagrant vagrant       494 Dec 18 20:42 SHA512SUMS</span>
<a name="__codelineno-38-2"></a><span class="go">-rw-r--r-- 1 vagrant vagrant       833 Dec 18 20:45 SHA512SUMS.sign</span>
</code></pre></div>
<p>Averiguo el fingerprint del par de claves que se usó originalmente para crear la firma <code>SHA512SUMS.sign</code>:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-39-1"></a><span class="go">gpg --verify SHA512SUMS.sign</span>
</code></pre></div>
<p><img alt="averiguando fingerprint" src="https://i.imgur.com/pSmi6pt.png" /></p>
<p>No se puede verificar la firma porque no tenemos la clave pública de Debian en nuestro keybox, pero ya sabemos su fingerprint para descargarla:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-40-1"></a><span class="go">gpg --keyserver keyring.debian.org --recv DF9B9C49EAA9298432589D76DA87E80D6294BE9B</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-41-1"></a><span class="go">gpg: key DA87E80D6294BE9B: public key &quot;Debian CD signing key &lt;debian-cd@lists.debian.org&gt;&quot; imported</span>
<a name="__codelineno-41-2"></a><span class="go">gpg: Total number processed: 1</span>
<a name="__codelineno-41-3"></a><span class="go">gpg:               imported: 1</span>
</code></pre></div>
<p>Finalmente, podemos verificar la firma:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-42-1"></a><span class="go">gpg --verify SHA512SUMS.sign SHA512SUMS</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a name="__codelineno-43-1"></a><span class="go">gpg: Signature made Sat Dec 18 20:45:36 2021 UTC</span>
<a name="__codelineno-43-2"></a><span class="go">gpg:                using RSA key DF9B9C49EAA9298432589D76DA87E80D6294BE9B</span>
<a name="__codelineno-43-3"></a><span class="go">gpg: Good signature from &quot;Debian CD signing key &lt;debian-cd@lists.debian.org&gt;&quot; [unknown]</span>
<a name="__codelineno-43-4"></a><span class="go">gpg: WARNING: This key is not certified with a trusted signature!</span>
<a name="__codelineno-43-5"></a><span class="go">gpg:          There is no indication that the signature belongs to the owner.</span>
<a name="__codelineno-43-6"></a><span class="go">Primary key fingerprint: DF9B 9C49 EAA9 2984 3258  9D76 DA87 E80D 6294 BE9B</span>
</code></pre></div>
<p>Se ha podido verificar correctamente, <code>SHA512SUMS</code> es legítimo.</p>
<h2 id="tarea-4-integridad-y-autenticidad-apt-secure">Tarea 4: Integridad y autenticidad (apt-secure)</h2>
<h3 id="41">4.1</h3>
<blockquote>
<p>¿Qué herramienta utiliza apt-secure para firmar y verificar firmas?</p>
</blockquote>
<p>GPG.</p>
<h3 id="42">4.2</h3>
<blockquote>
<p>¿Para qué sirve <code>apt-key</code>?</p>
</blockquote>
<p>Se usa para gestionar la lista de claves que mantiene apt para autenticar paquetes.  </p>
<p>Los paquetes que sean autenticados usando estas claves se considerarán "trusted".</p>
<blockquote>
<p>¿Qué muestra el comando <code>apt-key list</code>?</p>
</blockquote>
<p>Lista las claves públicas en las que confiamos.  </p>
<p>Muestro mi output de <code>apt-key list</code>:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-44-1"></a><span class="go">Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).</span>
<a name="__codelineno-44-2"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-bullseye-automatic.gpg</span>
<a name="__codelineno-44-3"></a><span class="go">------------------------------------------------------------</span>
<a name="__codelineno-44-4"></a><span class="go">pub   rsa4096 2021-01-17 [SC] [expires: 2029-01-15]</span>
<a name="__codelineno-44-5"></a><span class="go">      1F89 983E 0081 FDE0 18F3  CC96 73A4 F27B 8DD4 7936</span>
<a name="__codelineno-44-6"></a><span class="go">uid           [ unknown] Debian Archive Automatic Signing Key (11/bullseye) &lt;ftpmaster@debian.org&gt;</span>
<a name="__codelineno-44-7"></a><span class="go">sub   rsa4096 2021-01-17 [S] [expires: 2029-01-15]</span>
<a name="__codelineno-44-8"></a>
<a name="__codelineno-44-9"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-bullseye-security-automatic.gpg</span>
<a name="__codelineno-44-10"></a><span class="go">---------------------------------------------------------------------</span>
<a name="__codelineno-44-11"></a><span class="go">pub   rsa4096 2021-01-17 [SC] [expires: 2029-01-15]</span>
<a name="__codelineno-44-12"></a><span class="go">      AC53 0D52 0F2F 3269 F5E9  8313 A484 4904 4AAD 5C5D</span>
<a name="__codelineno-44-13"></a><span class="go">uid           [ unknown] Debian Security Archive Automatic Signing Key (11/bullseye) &lt;ftpmaster@debian.org&gt;</span>
<a name="__codelineno-44-14"></a><span class="go">sub   rsa4096 2021-01-17 [S] [expires: 2029-01-15]</span>
<a name="__codelineno-44-15"></a>
<a name="__codelineno-44-16"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-bullseye-stable.gpg</span>
<a name="__codelineno-44-17"></a><span class="go">---------------------------------------------------------</span>
<a name="__codelineno-44-18"></a><span class="go">pub   rsa4096 2021-02-13 [SC] [expires: 2029-02-11]</span>
<a name="__codelineno-44-19"></a><span class="go">      A428 5295 FC7B 1A81 6000  62A9 605C 66F0 0D6C 9793</span>
<a name="__codelineno-44-20"></a><span class="go">uid           [ unknown] Debian Stable Release Key (11/bullseye) &lt;debian-release@lists.debian.org&gt;</span>
<a name="__codelineno-44-21"></a>
<a name="__codelineno-44-22"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-buster-automatic.gpg</span>
<a name="__codelineno-44-23"></a><span class="go">----------------------------------------------------------</span>
<a name="__codelineno-44-24"></a><span class="go">pub   rsa4096 2019-04-14 [SC] [expires: 2027-04-12]</span>
<a name="__codelineno-44-25"></a><span class="go">      80D1 5823 B7FD 1561 F9F7  BCDD DC30 D7C2 3CBB ABEE</span>
<a name="__codelineno-44-26"></a><span class="go">uid           [ unknown] Debian Archive Automatic Signing Key (10/buster) &lt;ftpmaster@debian.org&gt;</span>
<a name="__codelineno-44-27"></a><span class="go">sub   rsa4096 2019-04-14 [S] [expires: 2027-04-12]</span>
<a name="__codelineno-44-28"></a>
<a name="__codelineno-44-29"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-buster-security-automatic.gpg</span>
<a name="__codelineno-44-30"></a><span class="go">-------------------------------------------------------------------</span>
<a name="__codelineno-44-31"></a><span class="go">pub   rsa4096 2019-04-14 [SC] [expires: 2027-04-12]</span>
<a name="__codelineno-44-32"></a><span class="go">      5E61 B217 265D A980 7A23  C5FF 4DFA B270 CAA9 6DFA</span>
<a name="__codelineno-44-33"></a><span class="go">uid           [ unknown] Debian Security Archive Automatic Signing Key (10/buster) &lt;ftpmaster@debian.org&gt;</span>
<a name="__codelineno-44-34"></a><span class="go">sub   rsa4096 2019-04-14 [S] [expires: 2027-04-12]</span>
<a name="__codelineno-44-35"></a>
<a name="__codelineno-44-36"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-buster-stable.gpg</span>
<a name="__codelineno-44-37"></a><span class="go">-------------------------------------------------------</span>
<a name="__codelineno-44-38"></a><span class="go">pub   rsa4096 2019-02-05 [SC] [expires: 2027-02-03]</span>
<a name="__codelineno-44-39"></a><span class="go">      6D33 866E DD8F FA41 C014  3AED DCC9 EFBF 77E1 1517</span>
<a name="__codelineno-44-40"></a><span class="go">uid           [ unknown] Debian Stable Release Key (10/buster) &lt;debian-release@lists.debian.org&gt;</span>
<a name="__codelineno-44-41"></a>
<a name="__codelineno-44-42"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-stretch-automatic.gpg</span>
<a name="__codelineno-44-43"></a><span class="go">-----------------------------------------------------------</span>
<a name="__codelineno-44-44"></a><span class="go">pub   rsa4096 2017-05-22 [SC] [expires: 2025-05-20]</span>
<a name="__codelineno-44-45"></a><span class="go">      E1CF 20DD FFE4 B89E 8026  58F1 E0B1 1894 F66A EC98</span>
<a name="__codelineno-44-46"></a><span class="go">uid           [ unknown] Debian Archive Automatic Signing Key (9/stretch) &lt;ftpmaster@debian.org&gt;</span>
<a name="__codelineno-44-47"></a><span class="go">sub   rsa4096 2017-05-22 [S] [expires: 2025-05-20]</span>
<a name="__codelineno-44-48"></a>
<a name="__codelineno-44-49"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-stretch-security-automatic.gpg</span>
<a name="__codelineno-44-50"></a><span class="go">--------------------------------------------------------------------</span>
<a name="__codelineno-44-51"></a><span class="go">pub   rsa4096 2017-05-22 [SC] [expires: 2025-05-20]</span>
<a name="__codelineno-44-52"></a><span class="go">      6ED6 F5CB 5FA6 FB2F 460A  E88E EDA0 D238 8AE2 2BA9</span>
<a name="__codelineno-44-53"></a><span class="go">uid           [ unknown] Debian Security Archive Automatic Signing Key (9/stretch) &lt;ftpmaster@debian.org&gt;</span>
<a name="__codelineno-44-54"></a><span class="go">sub   rsa4096 2017-05-22 [S] [expires: 2025-05-20]</span>
<a name="__codelineno-44-55"></a>
<a name="__codelineno-44-56"></a><span class="go">/etc/apt/trusted.gpg.d/debian-archive-stretch-stable.gpg</span>
<a name="__codelineno-44-57"></a><span class="go">--------------------------------------------------------</span>
<a name="__codelineno-44-58"></a><span class="go">pub   rsa4096 2017-05-20 [SC] [expires: 2025-05-18]</span>
<a name="__codelineno-44-59"></a><span class="go">      067E 3C45 6BAE 240A CEE8  8F6F EF0F 382A 1A7B 6500</span>
<a name="__codelineno-44-60"></a><span class="go">uid           [ unknown] Debian Stable Release Key (9/stretch) &lt;debian-release@lists.debian.org&gt;</span>
</code></pre></div>
<h3 id="43">4.3</h3>
<blockquote>
<p>¿Dónde se encuentran los distintos keyrings que usa <code>apt-key</code>?</p>
</blockquote>
<p>En <code>/etc/apt/trusted.gpg.d/</code>.</p>
<h3 id="44">4.4</h3>
<blockquote>
<p>¿Qué contiene el fichero <code>Release</code> de un repositorio?</p>
</blockquote>
<p>En otros datos, contiene los checksums de los ficheros que hay en el repositorio.</p>
<p>Ejemplo: <a href="http://ftp.debian.org/debian/dists/Debian11.2/Release">http://ftp.debian.org/debian/dists/Debian11.2/Release</a></p>
<blockquote>
<p>¿Y <code>Release.gpg</code>?</p>
</blockquote>
<p>Contiene la firma detached ascii-armored del fichero <code>Release</code>.</p>
<p>Ejemplo: <a href="http://ftp.debian.org/debian/dists/Debian11.2/Release.gpg">http://ftp.debian.org/debian/dists/Debian11.2/Release.gpg</a></p>
<h3 id="45">4.5</h3>
<blockquote>
<p>Explicar el proceso por el cual apt nos asegura que los ficheros que estamos descargando son legítimos</p>
</blockquote>
<ol>
<li>Se descargan los ficheros <code>Release</code>, <code>Release.gpg</code>, y el fichero <code>Packages</code> que corresponda.</li>
<li>Se comprueba usando la firma <code>Release.gpg</code> más la clave pública correspondiente, que el fichero <code>Release</code> es legítimo. A partir de aquí, apt ya confía en todos sus checksums.</li>
<li>Apt compara el checksum del fichero <code>Packages</code> con el que encuentra en el fichero <code>Release</code>; si coinciden, quiere decir que se descargó el fichero correcto.</li>
<li>Al descargarnos un paquete individual se compara su checksum con el que aparece en <code>Packages</code>; si coinciden, quiere decir que se descargó el paquete correcto.</li>
</ol>
<h3 id="46">4.6</h3>
<blockquote>
<p>Añadir el repositorio de VirtualBox</p>
</blockquote>
<p>Añado las claves gpg necesarias:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-45-1"></a><span class="go">wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -</span>
<a name="__codelineno-45-2"></a><span class="go">wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -</span>
</code></pre></div>
<p>Añado el repositorio:</p>
<div class="highlight"><pre><span></span><code><a name="__codelineno-46-1"></a><span class="go">echo &quot;deb [arch=amd64] http://download.virtualbox.org/virtualbox/debian bullseye contrib&quot; | sudo tee /etc/apt/sources.list.d/virtualbox.list</span>
</code></pre></div>
<h2 id="tarea-5-autenticacion-en-ssh">Tarea 5: Autenticación en SSH</h2>
<h3 id="51">5.1</h3>
<blockquote>
<p>Explicar qué sucede entre el cliente y el servidor para que se cifre la comunicación</p>
</blockquote>
<p>Una sesión SSH tiene 2 fases antes de que se pueda cifrar la comunicación. Las explicaré a continuación.</p>
<ol>
<li><strong>CONEXIÓN</strong><ol>
<li>El cliente establece una conexión TCP con el servidor, y este responde con las versiones del protocolo que soporta.</li>
<li>Si el cliente usa una versión del protocolo que coincida con las que acepta el servidor, la conexión continúa.</li>
<li>El servidor comparte su clave pública con el cliente, para que este compruebe si efectivamente es la máquina a la que quería conectarse.</li>
<li>A partir de ahora, ambas partes están preparadas para la negociación de una clave de sesión usando Diffie-Hellman.</li>
</ol>
</li>
<li><strong>NEGOCIACIÓN DE LA ENCRIPTACIÓN PARA LA SESIÓN</strong><ol>
<li>Ambas partes se ponen de acuerdo en un número primo alto, que servirá como "seed value".</li>
<li>Ambas partes se ponen de acuerdo en un tipo de cifrado (normalmente AES).</li>
<li>Ambas partes generan otro número primo por separado, que mantienen en secreto de la otra parte. Se usará como clave privada durante esta fase de negociación <em>(esta clave privada NO es la misma que se usa para la autenticación)</em>.</li>
<li>La clave privada generada + el tipo de cifrado + el número primo compartido, se usarán para generar una clave pública que estará derivada de la clave privada.</li>
<li>Ambas partes intercambian sus claves públicas generadas <em>(estas claves públicas NO son las mismas que se usan para la autenticación)</em>.</li>
<li>Cada parte usará su clave privada + la clave pública de la otra parte + el número primo compartido original, para calcular una clave compartida "shared secret". Aunque este proceso lo realiza cada parte por separado, mientras se usen claves públicas y privadas opuestas, se llegará al mismo "shared secret".</li>
<li>Este "shared secret" se usará para encriptar toda comunicación a partir de ahora. Es una clave simétrica.</li>
</ol>
</li>
</ol>
<blockquote>
<p>¿Para qué se utiliza la criptografía simétrica?</p>
</blockquote>
<p>Para encriptar las conexiones, mediante el uso de una clave secreta.</p>
<p>Esta se genera a través de un proceso llamado "key exchange algorithm",
y es única por sesión.<br />
En cuanto ambas partes la sepan, el resto de la sesión se encriptará usando esta clave.</p>
<blockquote>
<p>¿Y la asimétrica?</p>
</blockquote>
<p>Se usa:</p>
<ul>
<li>Durante el intercambio de clave para la encriptación simétrica. Ambas partes generan un par de claves temporal e intercambian la clave pública para poder generar el "shared secret" (clave simétrica) que se usará posteriormente.</li>
<li>En la autenticación del cliente con el servidor.</li>
</ul>
<h3 id="52">5.2</h3>
<p>Explicar los dos métodos de autenticación que existen.</p>
<h4 id="con-contrasena">Con contraseña</h4>
<p>Es el método más simple. Funciona así:</p>
<ol>
<li>El servidor pide al cliente que introduzca la contraseña del usuario con el que se están intentando conectar.</li>
<li>Esta contraseña se envía usando la encriptación previamente negociada, para que se mantenga en secreto frente a terceros.</li>
</ol>
<h4 id="con-par-de-claves">Con par de claves</h4>
<p>Es el método más popular y recomendado. Funciona así:</p>
<ol>
<li>El cliente envía el ID del par de claves con el que se quiere autenticar ante el servidor.</li>
<li>El servidor comprueba el fichero <code>authorized_keys</code> del usuario al que el cliente está intentando conectarse, para comprobar si existe la clave correspondiente al ID que envió el cliente en el paso anterior.</li>
<li>Si se encuentra una clave pública que corresponda con el ID enviado, el servidor genera un número aleatorio y usa esa clave pública para encriptarlo.</li>
<li>El servidor envía al cliente este número encriptado.</li>
<li>Si el cliente tiene la clave privada asociada, podrá desencriptar este mensaje y revelar el número original.</li>
<li>El cliente combina el número desencriptado con la clave compartida de sesión que se está usando para encriptar la comunicación, y calcula el hash MD5 de este valor.</li>
<li>El cliente envía este hash de vuelta al servidor como respuesta al mensaje del número encriptado.</li>
<li>El servidor usa la misma clave compartida de sesión junto con el número original que envió al cliente, y calcula el hash MD5 él también.</li>
<li>El servidor compara el hash que él mismo generó con el que el cliente le envió. Si estos valores son iguales, se prueba que el cliente tiene la clave privada correcta y finalmente, este cliente es autenticado correctamente.</li>
</ol>
<h3 id="53">5.3</h3>
<blockquote>
<p>Explicar la función del fichero <code>~/.ssh/known_hosts</code></p>
</blockquote>
<p>Es un fichero de cliente que contiene todas las claves públicas de los servidores a los que nos conectamos.</p>
<p>El cliente SSH usa este fichero para autenticar los servidores a los que se conecta.</p>
<h3 id="54">5.4</h3>
<blockquote>
<p>Explicar el significado del siguiente mensaje que aparece la primera vez que nos conectamos a un servidor</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-47-1"></a><span class="gp">$</span> ssh debian@172.22.200.74
<a name="__codelineno-47-2"></a><span class="go">The authenticity of host &#39;172.22.200.74 (172.22.200.74)&#39; can&#39;t be established.</span>
<a name="__codelineno-47-3"></a><span class="go">ECDSA key fingerprint is SHA256:7ZoNZPCbQTnDso1meVSNoKszn38ZwUI4i6saebbfL4M.</span>
<a name="__codelineno-47-4"></a><span class="go">Are you sure you want to continue connecting (yes/no)?</span>
</code></pre></div>
<p>Nos indica que, al ser la primera vez que nos estamos conectando a este servidor, aún no tenemos su clave pública almacenada en el fichero <code>~/.ssh/known_hosts</code>. Por lo tanto, aún "no podemos" verificar la autenticidad del mismo.</p>
<p>Si estamos seguros de su autenticidad, diremos que sí, y eso almacenará su clave pública en <code>~/.ssh/known_hosts</code>.</p>
<h3 id="55">5.5</h3>
<blockquote>
<p>¿Qué significa el siguiente mensaje que aparece cuando reutilizamos una ip?</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a name="__codelineno-48-1"></a><span class="gp"> $</span> ssh debian@172.22.200.74
<a name="__codelineno-48-2"></a><span class="go"> @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span>
<a name="__codelineno-48-3"></a><span class="go"> @    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span>
<a name="__codelineno-48-4"></a><span class="go"> @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span>
<a name="__codelineno-48-5"></a><span class="go"> IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span>
<a name="__codelineno-48-6"></a><span class="go"> Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span>
<a name="__codelineno-48-7"></a><span class="go"> It is also possible that a host key has just been changed.</span>
<a name="__codelineno-48-8"></a><span class="go"> The fingerprint for the ECDSA key sent by the remote host is</span>
<a name="__codelineno-48-9"></a><span class="go"> SHA256:W05RrybmcnJxD3fbwJOgSNNWATkVftsQl7EzfeKJgNc.</span>
<a name="__codelineno-48-10"></a><span class="go"> Please contact your system administrator.</span>
<a name="__codelineno-48-11"></a><span class="go"> Add correct host key in /home/jose/.ssh/known_hosts to get rid of this message.</span>
<a name="__codelineno-48-12"></a><span class="go"> Offending ECDSA key in /home/jose/.ssh/known_hosts:103</span>
<a name="__codelineno-48-13"></a><span class="go">   remove with:</span>
<a name="__codelineno-48-14"></a><span class="go">   ssh-keygen -f &quot;/home/jose/.ssh/known_hosts&quot; -R &quot;172.22.200.74&quot;</span>
<a name="__codelineno-48-15"></a><span class="go"> ECDSA host key for 172.22.200.74 has changed and you have requested strict checking.</span>
</code></pre></div>
<p>Este mensaje simplemente indica que la clave pública del servidor al que nos estamos intentando conectar ha cambiado con respecto a la clave que teníamos guardada para esa IP en nuestro <code>known_hosts</code> previamente.</p>
<p>Se nos avisa porque es una forma de ataque man-in-the-middle, pero si estamos seguros de que somos nosotros mismos reutilizando una IP, simplemente borraremos la línea correspondiente en nuestro <code>known_hosts</code> sobre la antigua conexión y volveremos a conectarnos.</p>
<h3 id="56">5.6</h3>
<blockquote>
<p>¿Qué guardamos y para qué sirve el fichero en el servidor <code>~/.ssh/authorized_keys</code>?</p>
</blockquote>
<p>Este es un fichero de servidor, diferente por cada usuario del sistema, y guarda todas las claves públicas de clientes permitidos para conectarse.</p>
<p>Sirve para que el servidor verifique que los clientes conectándose sean legítimos (que tengan la clave privada correspondiente).</p>
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>var script,disqus_config=function(){this.page.url="https://conocimiento-en-bits.neocities.org/practica-integridad-firmas-autenticacion/",this.page.identifier="practica-integridad-firmas-autenticacion/"};"undefined"==typeof DISQUS?((script=document.createElement("script")).async=!0,script.src="https://conocimiento-en-bits-neocities-org.disqus.com/embed.js",script.setAttribute("data-timestamp",Date.now()),document.body.appendChild(script)):DISQUS.reset({reload:!0,config:disqus_config})</script>

              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../practica-cifrado-asimetrico-gpg-openssl/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Criptografía 1: Cifrado asímetrico" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Criptografía 1: Cifrado asímetrico
            </div>
          </div>
        </a>
      
      
        
        <a href="../practica-vpn-sad/" class="md-footer__link md-footer__link--next" aria-label="Next: Práctica: VPN" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Práctica: VPN
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f89c2efe.min.js"></script>
      
    
  </body>
</html>